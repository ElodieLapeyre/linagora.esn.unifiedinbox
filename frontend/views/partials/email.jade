.card(ng-class='{"isCollapsed": email.isCollapsed}')

  .email-header(ng-click="ctrl.toggleIsCollapsed(email)", ng-class='{"clickable": email.isCollapsed != undefined}')

    .avatarify
      .from
        label.line-header #{__('From')}:
        emailer(emailer="::email.from")
      .to
        label.line-header #{__('To')}:
        emailer-group(group="::email.to")
      .cc
        label.line-header #{__('CC')}:
        emailer-group(group="::email.cc")
      .preview.ellipsis.line-header {{::email.preview}}

    .email-header-right
      ul.actions
        li.action-item
          a(ng-click="ctrl.replyAll(); $event.stopPropagation()" title="#{__('Reply all')}")
            i.mdi.mdi-reply-all
        li.action-item
          a(action-list, action-list-url="/unifiedinbox/views/view-email/action-list.html" title="#{__('More')}")
            i.mdi.mdi-view-module
      .flex-space-between.horiz-space
        email-star(email='email')
        span.date {{::email.date | date:'short' }}

  .email-body
    html-email-body(ng-if="email.htmlBody", email="::email")
    .lv-item.multilines(ng-if="!email.htmlBody") {{::email.textBody}}
    .lv-item(ng-if="!email.htmlBody && !email.textBody") {{::email.preview}}
      .text-center(openpaas-logo-spinner, spinner-start-active='1',spinner-size='0.5')

  .lv-footer(ng-if="email.attachments.length > 0")
    .attachments
      i.title.mdi.mdi-attachment #{__('Attachments')}
      inbox-attachment(ng-repeat="attachment in ::email.attachments", ng-if="::!attachment.isInline", attachment="::attachment")
